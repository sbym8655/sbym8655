---
title: "Milestone 4"
author: "Hansang Park"
date: "11/19/2021"
output: html_document
---
## Loading libraries, database, and setup for visualization
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(lubridate)
library(ggplot2)
library(dplyr)

#Import statements
cov_vax_admin <- read_csv("cov_vax_admin.csv")
ca_county_demographics <- read_csv("ca_county_demographics.csv")
names(ca_county_demographics) [names(ca_county_demographics) == "X1"] <- "No."
names(cov_vax_admin) [names(cov_vax_admin) == "X1"] <- "No."

#Subset rows or columns as needed
df <- cov_vax_admin %>%
  filter(as_of_date == as.Date("2021-09-14"))%>%
  select(zip_code_tabulation_area,local_health_jurisdiction,
         age12_plus_population,persons_fully_vaccinated)
```

## Milestone 4
Visualizations
Please submit an Rmd and either a knit PDF or html file via github with the following:
1.	Three or more visualizations 
o	One print quality table as requested in scenario
o	One print quality plot or chart as requested in scenario
o	One additional print quality table or plot of your choice (can support the requested data in the scenario, or answer a different question using the same data sources)
2.	For each visual, include
o	Code used to generate visual
o	Legend
o	2-3 sentence interpretation 
o	NOTE: please make sure visual can stand-alone, meaning it includes enough information in title, legend, and footnote so that a person who sees only the visualization could understand what is being presented
3.	PDF that is professionally prepared for presentation
o	Each part of the milestone is clearly on one page (use \newpage to push to a new page)
o	Only the necessary information is outputted (e.g., suppressing entire data frame outputs)
o	Use of headers and sub headers to create an organized document

#### 1. Visualization 1 - table
Include code used to generate visual, legend, 2-3 sentence interpretation. 
Please make sure visual can stand-alone, meaning it includes enough information in title, legend, and footnote so that a person who sees only the visualization could understand what is being presented.

Suggestion: Create joined table showing county, median age, and percentages of vaccinated persons.

```{r}
# Convert county names to upper case to prepare for joining by case sensitive county names
# Key: county
df_ca_co_demog$county = toupper(df_ca_co_demog$name)

# Remove extraneous columns that won't be in final table
# Retain population as this might be used for visualization
df_ca_co_medage <- select(df_ca_co_demog, -c(No., name))

# Reorder columns to put county name first
df_ca_co_medage <- df_ca_co_medage %>% relocate(county, .before = pop2012)

# Rework vaccination dataframe to create a mean percentage of vaccinated persons by county
# Subset data by creating mean percentage of vacccinated persons
df9 <- df8 %>%
  group_by(local_health_jurisdiction)%>%
  summarise_at(vars(vaccination_rate_percentage), list(mean_vx_prct = mean))
view(df9)
# First output gives mean = na if even one cell is missing data.
# Unsure why some percentages are NA even when it seems like the data is available to calculate
# Inf is returned if dividing by zero. 

# Join tables by County
# Can't run until second table (df_vax_ready) is available, therefore commented out for now.
# inner_join(df_ca_co_medage, df_vax_ready, by c("county" = "local_health_jurisdiction"))

```

\newpage

#### 2. Visualization 2 - plot or chart

Include code used to generate visual, legend, 2-3 sentence interpretation. 
Please make sure visual can stand-alone, meaning it includes enough information in title, legend, and footnote so that a person who sees only the visualization could understand what is being presented.

Suggestion: Create plot showing percentages of vaccinated persons by county.

```{r}

```

\newpage

#### 3. Visualization 3 - One additional print quality table or plot of your choice
  Can support the requested data in the scenario, or answer a different question using the same data sources. 
  
  Include code used to generate visual, legend, 2-3 sentence interpretation. 
Please make sure visual can stand-alone, meaning it includes enough information in title, legend, and footnote so that a person who sees only the visualization could understand what is being presented.

Suggestion: Create plot showing percentages of vaccinated persons by county's median age.

```{r}

```

  
\newpage

#### 4. PDF professionally prepared for presentation

o	Each part of the milestone is clearly on one page (use \newpage to push to a new page)
o	Only the necessary information is outputted (e.g., suppressing entire data frame outputs)
o	Use of headers and sub headers to create an organized document

What evidence if any exists of a strong correlative relationship, and if so in what direction?

```{r}

```

\newpage